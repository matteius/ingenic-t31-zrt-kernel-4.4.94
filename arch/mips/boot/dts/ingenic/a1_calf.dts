/dts-v1/;

#include <dt-bindings/input/input.h>
#include "a1.dtsi"
#include <dt-bindings/interrupt-controller/irq.h>

/ {
	compatible = "ingenic,tucana", "ingenic,a1";
};

&rtc {
	status = "okay";
};

&uart0 {
	status = "disable";
};

&uart1 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart1_pc>;
};

&uart2 {
	status = "disable";
};

&i2c0 {
	pinctrl-0 = <&i2c0_pa>;
	pinctrl-names = "default";
	status = "disabled";
};

&i2c1 {
	pinctrl-0 = <&i2c1_pa>;
	pinctrl-names = "default";
	status = "disabled";
};

&cpufreq {
	status = "okay";
	operating-points = <
		/*KHZ uV */
		1200000	900000
		750000	900000
		600000	900000
		500000	900000
		400000	900000
		375000	900000
		300000	900000
		200000	900000
			>;

};

//&pwm {
//	ingenic,pwm-outputs = <0>; /* <0 - 15> select which pwms are really used */
//}

&pdma {
	status = "okay";
};

&msc0 {
	status = "okay";
	pinctrl-names = "default";
	/*mmc-hs200-1_8v;*/
	cap-mmc-highspeed;
	max-frequency = <50000000>;
	bus-width = <4>;
	voltage-ranges = <1800 3300>;
	cd-inverted;

	/* special property */
	ingenic,wp-gpios = <0>;
	ingenic,cd-gpios = <&gpc 11 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
	ingenic,rst-gpios = <0>;
	pinctrl-0 = <&msc0_pb>;
};

&msc1 {
	status = "disabled";
	pinctrl-names = "default";
	/*mmc-hs200-1_8v;*/
	cap-mmc-highspeed;
	max-frequency = <50000000>;
	bus-width = <4>;
	voltage-ranges = <1800 3300>;
	non-removable;

	ingenic,sdio_clk=<1>;

	/* special property */
	ingenic,wp-gpios = <0>;
	ingenic,rst-gpios = <0>;
	pinctrl-0 = <&msc1_pb>;
};

&gmac0 {
	pinctrl-names = "default", "reset";
	pinctrl-0 = <&gmac0_rmii_p0_normal>, <&gmac0_rmii_p1_normal>;
	pinctrl-1 = <&gmac0_rmii_p0_rst>, <&gmac0_rmii_p1_normal>;
	status = "okay";
	ingenic,mode-reg = <0xb00000c8>;	/* config phy control */
	phy-handle = <&ethphy0>;
	phy-mode = "rmii";
	macphy-rate = <50000000>;

	ingenic,reset-gpios = <&gpc 18 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
	ingenic,rst-ms = <10>;
	max-speed = <100>;

	mdio {
		compatible = "snps,dwmac-mdio";
		#address-cells = <1>;
		#size-cells = <0>;
		ethphy0: ethernet-phy@0 {
			reg = <0>;				/* phy addr */
			max-speed = <100>;
			reset-gpios = <&gpc 18 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
			reset-delay-us = <10000>;
		};
	};
};

&gmac1 {
	pinctrl-names = "default", "reset";
	pinctrl-0 = <&gmac1_rmii_p0_normal>, <&gmac1_rmii_p1_normal>;
	pinctrl-1 = <&gmac1_rmii_p0_rst>, <&gmac1_rmii_p1_normal>;
	status = "okay";
	ingenic,mode-reg = <0xb00000d8>;	/* config phy control */
	phy-handle = <&ethphy1>;
	phy-mode = "rgmii";
	macphy-rate = <25000000>; /* rgmii macphy clk is 25M */

	ingenic,reset-gpios = <&gpc 19 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
	ingenic,rst-ms = <10>;
	max-speed = <1000>;

	mdio {
		compatible = "snps,dwmac-mdio";
		#address-cells = <1>;
		#size-cells = <0>;
		ethphy1: ethernet-phy@1 {
			reg = <0>;				/* phy addr */
			max-speed = <1000>;
			reset-gpios = <&gpc 19 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
			reset-delay-us = <10000>;
		};
	};
};

&sata {
	status = "okay";
	pinctrl-names = "default";
	ingenic,clkgate_reg = <0xb00000f0>;
	ingenic,phy0_rxsqul_reg = <0xb0080030>;
	ingenic,phy0_rxoffseta_reg = <0xb0080870>;
	ingenic,phy0_rxoffsetb_reg = <0xb0080044>;
	ingenic,phy0_rxoffsetc_reg = <0xb0080020>;
};

&sfc0 {
	status = "okay";
	pinctrl-names = "default";
	ingenic,sfc-max-frequency = <200000000>;
	ingenic,use_board_info      = /bits/ 8 <0>;
	ingenic,spiflash_param_offset = <0>;
	pinctrl-0 = <&sfc0_pc>;
};

&sfc1 {
	status = "okay";
	pinctrl-names = "default";
	ingenic,sfc-max-frequency = <200000000>;
	ingenic,use_board_info      = /bits/ 8 <0>;
	ingenic,spiflash_param_offset = <0>;
	pinctrl-0 = <&sfc1_pb>;
};


&spi0 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&spi0_pb1>;

	spi-max-frequency = <48000000>;
	num-cs = <2>;
	cs-gpios = <0>, <0>;
	ingenic,chnl = <0>;
	ingenic,allow_cs_same = <1>;
	ingenic,bus_num = <0>;
	ingenic,has_dma_support = <1>;
};

&spi1 {
	status = "disabled";
	pinctrl-names = "default";
	pinctrl-0 = <&spi1_pc>;

	spi-max-frequency = <48000000>;
	num-cs = <2>;
	cs-gpios = <0>, <0>;
	ingenic,chnl = <1>;
	ingenic,allow_cs_same = <1>;
	ingenic,bus_num = <1>;
	ingenic,has_dma_support = <1>;
};

&vde{
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&vga_pc>;
};

&dtrng {
	status = "okay";
};

&otg0 {
	g-use-dma;
	dr_mode = "otg0";
	status = "okay";
};

&otg1 {
	g-use-dma;
	dr_mode = "otg1";
	status = "okay";
};

&otg2 {
	g-use-dma;
	dr_mode = "otg2";
	status = "okay";
};

&otg_phy {
	dr_mode = "otg";
	compatible = "ingenic,innophy", "syscon";
	ingenic,drvvbus-gpio = <&gpc 16 GPIO_ACTIVE_HIGH INGENIC_GPIO_NOBIAS>;
	status = "okay";
};

&jpeg {
	status = "okay";
};

/ {

	extclk: extclk {
		clock-frequency = <24000000>;
	};

	gpio_keys: gpio_keys {
		   compatible = "gpio-keys";

		   power {
			   label = "Power";
			   linux,code = <KEY_POWER>;
			   gpios = <&gpa 31 GPIO_ACTIVE_LOW INGENIC_GPIO_NOBIAS>;
			   gpio-key,wakeup;
		   };
            bootsel0 {
                label = "bootsel0";
                linux,code = <KEY_HOME>;
                gpios = <&gpc 0 GPIO_ACTIVE_HIGH INGENIC_GPIO_NOBIAS>;
            };

            bootsel1 {
                label = "bootsel1";
                linux,code = <KEY_BACK>;
                gpios = <&gpc 1 GPIO_ACTIVE_HIGH INGENIC_GPIO_NOBIAS>;
            };

	   };
};
